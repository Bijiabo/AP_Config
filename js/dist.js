var cache={hasBeenGetSSIDScanList:!1},generate={consoleInfoFromHTML:function(e){for(var t="",n=0,s=e.length;n<s;n++){var i=e[n],a='            <label class="form_item_title">'+i.key+'</label>            <div class="pure-u-1 edit-input-container">                <input class="pure-input-1" type="text" placeholder="" value="'+i.value+'">            </div>';i.enable||(a='                <label class="form_item_title">'+i.key+'</label>                <div class="pure-u-1 form_item_disable_edit">                    <div class="pure-input-1">'+i.value+"</div>                </div>"),t+=a}return t},SSIDListFromHTML:function(e){for(var t="",n=0,s=e.length;n<s;n++){var i=e[n];t+='            <label class="m-check ui-margin">                <input type="radio" name="ssid_list" value="'+n+'" '+(0==n?"checked":"")+'>                <div class="m-radio ui-pos"></div>                <div class="ssid_list_name">'+i.ssid+'</div>                <div class="ssid_list_strength">'+i.strength+"%</div>            </label>"}return t},SavedSSIDListFromHTML:function(e){for(var t="",n=0,s=e.length;n<s;n++){var i=e[n],a="saved-ssid-item-container-"+n;t+='            <label class="m-check ui-margin" id="'+a+'">                <div class="ssid_list_name" style="margin-left: 0;">'+i.ssid+'</div>                <div class="ssid_list_delete" style="float: right; text-align: right;" onclick="removeSSID(\''+i.ssid+","+a+'\');">                <img src="assets/delete.jpg">                </div>            </label>'}return t}},render={setHTMLForElementID:function(e,t){var n=document.getElementById(e);n?n.innerHTML=t:console.error("Can not find element #"+e)},consoleInfoFormByFormData:function(e){var t=generate.consoleInfoFromHTML(e);this.setHTMLForElementID("form-items-container",t)},SSIDListFromBySSIDList:function(e){var t=generate.SSIDListFromHTML(e);this.setHTMLForElementID("ssid-list-container",t)},SavedSSIDListFromBySSIDList:function(e){var t=generate.SavedSSIDListFromHTML(e);this.setHTMLForElementID("saved-network-list-container",t)}},refreshSSIDListData={setIntervalID:-1,start:function(){var e=this;this.end();this.setIntervalID=window.setInterval(function(){API.getWiFiScanList(function(t){t.success?(render.SSIDListFromBySSIDList(t.data),e.end()):alert("Get Wi-Fi scan list failed. Please try refresh page again.")})},5e3)},end:function(){this.setIntervalID<=0||(window.clearInterval(this.setIntervalID),this.setIntervalID=-1)}},selectedSSID=function(e){e.preventDefault();var t=document.querySelector('input[name="ssid_list"]:checked');t||console.error("Can not find selected SSID Item");var n=t.value;console.log("Selected SSID Value is:"+n),enterCodeContainerElements.show()},enterCodeContainerElements={getElement:function(){var e=document.getElementsByClassName("enter-code-container");return e.length>0?e[0]:(console.error("Can not find enter-code-container"),!1)},show:function(){var e=this.getElement();e&&(e.style.display="block")},hide:function(){var e=this.getElement();e&&(e.style.display="none")}},reloadPage=function(){window.location.reload()},connectSSID=function(e){e.preventDefault();var t=document.querySelector('input[name="ssid_list"]:checked');t||console.error("Can not find selected SSID Item");var n=t.value,s=window.ssid_scan_list[n].ssid,i=document.getElementById("ssid-password").value;console.log("Selected SSID Value is:"+s,"password is: "+i),API.connectWiFi(s,i,function(e){e.success?alert("Connect Wi-Fi success!"):alert("Connect Wi-Fi failed, please try again.")})},reset=function(e){e.preventDefault(),API.reset(function(e){e.success?alert("Reset success!"):alert("Reset failed, please try again.")})},removeSSID=function(e,t){API.removeSavedSSID(e,function(e){if(e.success){alert("Remove SSID success!");var n=document.getElementById(t);n&&n.remove(),window.location.reload()}else alert("Remove SSID failed, please try again.")})},login=function(e){e.preventDefault();var t=document.getElementById("name").value,n=document.getElementById("password").value;API.login(t,n,function(e){e.success?(alert("Log in success!"),window.location.href="/wifi_config.html"):alert("Log in failed, please try again and check your name and password.")})},_sideBarMenuDisplay=!1,toggleSideBarMenu=function(){console.log("toggleSideBarMenu");_sideBarMenuDisplay?document.body.classList.remove("display-menu"):document.body.classList.add("display-menu"),_sideBarMenuDisplay=!_sideBarMenuDisplay};window.onload=function(){document.body.classList.add("load")},function(e,t){"use strict";"function"==typeof define&&define.amd?define("ajax",t):"object"==typeof exports?exports=module.exports=t():e.ajax=t()}(this,function(){"use strict";function e(e){return e||null}function t(e,t,i,o){var c=["then","catch","always"].reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),l=new XMLHttpRequest,d=n(t,i,e);return l.open(e,d,!0),l.withCredentials=o.hasOwnProperty("withCredentials"),s(l,o.headers),l.addEventListener("readystatechange",a(c,l),!1),l.send(r(i)),c.abort=function(){return l.abort()},c}function n(e,t,n){if("get"!==n.toLowerCase()||!t)return e;var s=r(t);return e+(e.indexOf("?")>-1?"&":"?")+s}function s(e,t){i(t=t||{})||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function i(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function a(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,o(t)),t.status>=200&&t.status<300?e.then.apply(e,o(t)):e.catch.apply(e,o(t)))}}function o(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function r(e){return c(e)?l(e):e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return Object.keys(e).reduce(function(t,n){return(t?t+"&":"")+d(n)+"="+d(e[n])},"")}function d(e){return encodeURIComponent(e)}return function(n){return n=n||{},n.baseUrl=n.baseUrl||"",n.method&&n.url?t(n.method,n.baseUrl+n.url,e(n.data),n):["get","post","put","delete"].reduce(function(s,i){return s[i]=function(s,a){return t(i,n.baseUrl+s,e(a),n)},s},{})}});var API={_debugMode:!1,_log:function(e,t,n,s){console.log("run ["+e+"]: ",t,n,s)},_post:function(e,t,n){this._log("post",e,t,n),ajax().post(e,t).then(n)},_get:function(e,t){this._log("get",e,{},t),ajax().get(e).then(t)}};API.getWiFiScanList=function(e){this._debugMode?e({success:!0,data:[{ssid:"MXCHIP_PD",strength:"100"},{ssid:"MXCHIP_FAE",strength:"85"},{ssid:"MXCHIP_FHE",strength:"93"},{ssid:"MXCHIP_TE",strength:"60"}]}):this._get("/api/wifi_scan_list",e)},API.getWiFiSavedList=function(e){this._debugMode?e({success:!0,data:[{ssid:"MXCHIP_PD_5G"},{ssid:"MXCHIP_Salse"}]}):this._get("/api/wifi_saved_list",e)},API.getConsoleInfo=function(e){this._debugMode?e({success:!0,data:[{key:"Device name",value:"Charlie's Bride",enable:!1},{key:"Device ID",value:"XXX XXX XXX",enable:!1},{key:"Family name",value:"Smith",enable:!1},{key:"Family ID",value:"XXX XXX XXX",enable:!1},{key:"Registration date",value:"12 March 2018",enable:!1}]}):this._get("/api/console_info",e)},API.login=function(e,t,n){var s={name:e,password:t};this._post("/api/login",s,n)},API.connectWiFi=function(e,t,n){if(this._debugMode)n({success:!0});else{var s={ssid:e,password:t};this._post("/api/connect_wifi",s,n)}},API.reset=function(e){this._debugMode?e({success:!0}):this._post("/api/reset",{},e)},API.removeSavedSSID=function(e,t){this._debugMode?t({success:!0}):this._post("/api/remove_saved_ssid",{ssid:e},t)};